## 📋 基本資訊
**類型**: <!-- 🐛 Bug修復 | ✨ 新功能 | 🔧 重構 | 📚 文件 | 🚀 效能優化 | 🔒 安全更新 -->
**優先級**: <!-- 🔴 緊急 | 🟡 高 | 🟢 中 | 🔵 低 -->
**相關 Issue**: <!-- Fixes #123, Related to #456 -->

---

## 🎯 目的
<!-- 說明這次 PR 的主要動機與要解決的問題 -->
- **問題描述**: 
- **解決方案**: 
- **預期效益**: 

---

## 🔄 變更內容
<!-- 條列這次修改了哪些檔案、功能，重要變更請優先列出 -->

### 主要變更
- [ ] 

### 次要變更  
- [ ] 

### 配置變更 (重要！)
- [ ] 環境變數：新增/修改 `.env` 中的設定
- [ ] 資料庫：Schema 變更、Migration 腳本
- [ ] API：新增/修改端點，影響前端呼叫

---

## 🧪 測試方式
<!-- 如何驗證這次變更正確，提供具體的驗證步驟 -->

### 手動測試步驟
1. 
2. 
3. 

### 自動化測試狀態
- [ ] 單元測試通過 (`npm test`)
- [ ] 整合測試通過 (`npm run test:integration`) 
- [ ] Linting 通過 (`npm run lint`)

### SQL/BigQuery 測試 (如適用)
```sql
-- 請提供測試用的 SQL 查詢和預期結果
-- 包含邊界條件測試
```

### 測試截圖/數據
<!-- 如有 UI 變更或數據驗證，請附上截圖 -->

---

## ⚠️ 影響/風險
<!-- 請誠實評估可能影響的範圍和風險 -->

### 影響範圍
- [ ] 使用者介面/體驗
- [ ] 後端 API 回應 
- [ ] 資料庫效能/結構
- [ ] 第三方服務整合
- [ ] 系統效能表現

### 潛在風險
| 風險項目 | 發生機率 | 影響程度 | 緩解措施 |
|---------|---------|---------|---------|
| 例：資料庫鎖定 | 低 | 高 | 維護時段執行 + 監控 |

### 上線後監控重點
- [ ] 錯誤率保持 < 1%
- [ ] API 回應時間 < 500ms
- [ ] 資料庫連線穩定
- [ ] 記憶體使用正常

---

## 🔄 回滾方案
<!-- 出問題時的還原策略，越詳細越好 -->

### 快速回滾 (5分鐘內)
- [ ] **Git 回滾**: `git revert [commit-hash]`
- [ ] **Feature Flag**: 設定 `FEATURE_XXX=false` 
- [ ] **緊急熱修**: 已準備 hotfix branch

### 完整回滾 (需要時間)
- [ ] **資料庫回滾**: 執行 `rollback_v[version].sql`
- [ ] **快取清理**: 清除相關 Redis keys
- [ ] **CDN 更新**: 回滾靜態檔案

### 回滾驗證步驟
1. 確認核心功能正常
2. 檢查關鍵業務指標
3. 驗證使用者體驗

---

## 🤖 請 Claude 協助 Review 的重點

### 🎯 自動派遣專業檢查員
<!-- Claude 會根據變更內容，自動啟用適當的 sub-agent 進行檢查 -->

**根據這次 PR 的變更，請啟用以下專業檢查員**：
- [ ] **Code Quality Agent** - 程式碼品質與結構檢查
- [ ] **Security Agent** - 安全性與敏感資訊掃描  
- [ ] **Data & SQL Agent** - 資料處理與 BigQuery 最佳化
- [ ] **Documentation Agent** - 文件完整性與維護性
- [ ] **Performance Agent** - 效能瓶頸與擴展性評估

### 🔍 核心檢查項目 (保持原有簡潔性)
- [ ] **命名一致性**：變數、函數、檔案命名是否清楚一致
- [ ] **SQL 型別正確性**：`INT64` vs `STRING`、時區 `Asia/Taipei`
- [ ] **安全性檢查**：是否誤提交憑證、API Key 或敏感資訊
- [ ] **文件完整性**：是否足夠讓其他人延續開發
- [ ] **效能影響**：是否有明顯的效能瓶頸或資源浪費

### 🎯 特別關注 (依 PR 類型調整)
<!-- 請勾選這次 PR 特別需要關注的面向 -->
- [ ] **BigQuery 查詢最佳化** - 大表掃描、JOIN 策略、PARTITION 使用
- [ ] **API 向下相容性** - 不破壞現有前端整合  
- [ ] **資料遷移安全性** - Migration 腳本審查、備份策略
- [ ] **使用者體驗影響** - 載入速度、互動流程、錯誤處理
- [ ] **監控與告警** - 關鍵指標監控、異常告警設定

---

## 📊 自我檢查清單 (提交前)

### ✅ 程式碼品質
- [ ] 已進行 self-review，邏輯正確
- [ ] 移除 debug console.log 和註解程式碼
- [ ] 程式碼格式化完成 (Prettier/ESLint)
- [ ] 新增必要的單元測試

### 🔒 安全確認  
- [ ] 無 API Key、password 等敏感資訊
- [ ] 使用者輸入有適當驗證  
- [ ] 權限檢查邏輯正確
- [ ] SQL injection 防護確認

### 📚 文件更新
- [ ] README 或相關文件已更新
- [ ] API 文件同步更新 (如適用)
- [ ] CHANGELOG 記錄新增
- [ ] 團隊 Slack 通知準備 (重要變更)

### 🚀 部署準備
- [ ] 環境變數設定文件準備
- [ ] 資料庫 Migration 腳本測試
- [ ] 監控指標設定完成  
- [ ] 回滾計畫書面確認

---

## 📝 額外資訊

### 🔗 相關連結
- **設計稿**: 
- **技術討論**: 
- **相關 PR**: 

### 📅 時程安排
- **目標上線時間**: 
- **Code Review 截止**: 
- **測試完成時間**: 

### 👥 需要特別 Review 的同事
<!-- 根據專業領域指定 -->
- **架構/效能**: @tech-lead
- **資料/SQL**: @data-engineer  
- **前端整合**: @frontend-dev
- **安全性**: @security-reviewer

---

**⚡ 重要提醒**
- 大型變更請提前在 #dev-team 頻道討論
- 資料庫變更必須在維護時段執行
- 緊急修復請直接聯繫 @on-call-engineer
- [程式碼規範參考](docs/coding-standards.md) | [緊急回滾手冊](docs/emergency-rollback.md)
