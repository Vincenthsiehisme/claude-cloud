# ==========================================
# Claude Cloud - 環境變數配置範本 (Enhanced)
# ==========================================
# 
# 使用方法：
# 1. 複製此檔案為 .env：cp .env.sample .env
# 2. 填入各項實際值
# 3. 確保 .env 已在 .gitignore 中
# 
# ⚠️  警告：絕對不要將 .env 檔案提交到版本控制！
# ==========================================

# === 應用程式基本設定 ===
NODE_ENV=development
APP_NAME=claude-cloud
APP_VERSION=2.0.0
PORT=3000
HOST=localhost
PUBLIC_URL=http://localhost:3000

# === 安全性設定 ===
# JWT 設定 (生產環境請使用 32+ 字元的隨機字串)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-32chars
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# 密碼加密設定
BCRYPT_ROUNDS=12

# 加密金鑰 (32 字元)
ENCRYPTION_KEY=your-32-character-encryption-key

# 安全標頭設定
SECURITY_HEADERS_ENABLED=true
CSP_NONCE_ENABLED=true
HSTS_MAX_AGE=31536000

# CORS 設定 (多個網域用逗號分隔)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# 速率限制
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_TRUSTED_IPS=127.0.0.1,::1

# Session 設定
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400000

# === AI 服務配置 ===
# Anthropic Claude API Key (必填)
# 取得位置: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-claude-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# OpenAI API Key (選填，如需使用 GPT 系列)
# 取得位置: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4

# AI 服務配置
AI_REQUEST_TIMEOUT=30000
AI_MAX_TOKENS=4000
AI_TEMPERATURE=0.7

# === 資料庫配置 ===
# 主要資料庫 (PostgreSQL/MySQL 等)
DATABASE_URL=postgresql://username:password@localhost:5432/claude_cloud_dev
DB_HOST=localhost
DB_PORT=5432
DB_NAME=claude_cloud_dev
DB_USER=username
DB_PASSWORD=password
DB_SSL=false

# 資料庫連線池設定
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=300000
DB_ACQUIRE_TIMEOUT=30000

# BigQuery 設定
BQ_PROJECT_ID=your-gcp-project-id
BQ_DATASET=your-dataset-name
BQ_LOCATION=asia-southeast1
BQ_MAX_RESULTS=10000
BQ_TIMEOUT=30000

# Redis (快取/會話儲存)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_KEY_PREFIX=claude-cloud:
REDIS_TTL=3600

# === 雲端服務配置 ===
# AWS 配置
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=your-s3-bucket-name
AWS_S3_REGION=ap-southeast-1

# Google Cloud 配置
GOOGLE_APPLICATION_CREDENTIALS=path/to/your/service-account.json
GCP_PROJECT_ID=your-gcp-project-id
GCP_REGION=asia-southeast1

# === 外部服務整合 ===
# 電子郵件服務 (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@claude-cloud.com

# 支付服務 (Stripe)
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-stripe-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_WEBHOOK_ENDPOINT=/webhooks/stripe

# === 監控與日誌 ===
# 日誌設定
LOG_LEVEL=info
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD

# 監控設定
PROMETHEUS_METRICS_PORT=9090
GRAFANA_DASHBOARD_URL=http://localhost:3001
HEALTH_CHECK_ENDPOINTS=/health,/ready
HEALTH_CHECK_TIMEOUT=5000

# Sentry 錯誤追蹤
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=development
SENTRY_RELEASE=1.0.0

# 日誌聚合
LOG_AGGREGATION_ENDPOINT=https://your-log-service.com/api/logs
LOG_AGGREGATION_API_KEY=your-log-api-key

# === 效能與限制 ===
# 檔案上傳限制 (MB)
MAX_FILE_SIZE=10
MAX_FILES_PER_REQUEST=5
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx,txt

# 請求限制
REQUEST_TIMEOUT=30000
MAX_REQUEST_SIZE=10mb

# 快取設定
CACHE_TTL=3600
CACHE_MAX_SIZE=100

# === 功能開關 ===
# 啟用功能旗標
ENABLE_DEBUG_MODE=false
ENABLE_SWAGGER_UI=true
ENABLE_METRICS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true
ENABLE_CORS=true
ENABLE_COMPRESSION=true

# AI 功能開關
ENABLE_CLAUDE_API=true
ENABLE_OPENAI_API=false
ENABLE_AI_CACHING=true

# === 開發工具配置 ===
# 熱重載
ENABLE_HOT_RELOAD=true
HOT_RELOAD_PORT=3001

# API 文件
API_DOCS_PATH=/api-docs
SWAGGER_TITLE=Claude Cloud API
SWAGGER_DESCRIPTION=AI-powered cloud collaboration platform

# 開發代理設定
PROXY_API_URL=http://localhost:8000
PROXY_TIMEOUT=10000

# === 測試環境專用 ===
# 測試資料庫
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/claude_cloud_test
TEST_REDIS_URL=redis://localhost:6379/1

# 模擬服務
MOCK_EXTERNAL_APIS=false
MOCK_AI_RESPONSES=false
MOCK_EMAIL_SERVICE=true

# 測試設定
TEST_TIMEOUT=30000
TEST_PARALLEL=true

# === 生產環境額外設定 ===
# (以下變數僅在 NODE_ENV=production 時使用)

# SSL 憑證
SSL_CERT_PATH=path/to/certificate.crt
SSL_KEY_PATH=path/to/private.key
SSL_CA_PATH=path/to/ca-bundle.crt

# CDN 配置
CDN_URL=https://cdn.yourdomain.com
STATIC_FILES_CDN=https://static.yourdomain.com

# 負載平衡
CLUSTER_MODE=true
CLUSTER_WORKERS=4

# 安全增強 (生產環境)
TRUST_PROXY=true
BEHIND_REVERSE_PROXY=true
SECURE_COOKIES=true
CSRF_PROTECTION=true

# === 容器化設定 ===
# Docker 相關
DOCKER_HOST=unix:///var/run/docker.sock
COMPOSE_PROJECT_NAME=claude-cloud

# Kubernetes
K8S_NAMESPACE=claude-cloud
K8S_SERVICE_ACCOUNT=claude-cloud-sa

# === 新增：現代化配置 ===
# Microservices
SERVICE_DISCOVERY_URL=http://localhost:8500
SERVICE_NAME=claude-cloud-api
SERVICE_VERSION=2.0.0

# Message Queue
RABBITMQ_URL=amqp://localhost:5672
KAFKA_BROKERS=localhost:9092

# Observability
JAEGER_ENDPOINT=http://localhost:14268/api/traces
OPENTELEMETRY_ENDPOINT=http://localhost:4317

# ==========================================
# 環境變數驗證清單 ✓
# ==========================================
# 開發環境必填：
# □ NODE_ENV, PORT, DATABASE_URL
# □ ANTHROPIC_API_KEY
# □ JWT_SECRET (32+ 字元)
# □ ENCRYPTION_KEY (32 字元)
#
# 生產環境額外必填：
# □ 所有密碼使用強隨機字串
# □ SSL 憑證路徑正確
# □ 監控服務配置完成
# □ 備份策略設定完成
# ==========================================

# ==========================================
# 安全檢查指令：
# npm run security:check
# npm run env:validate
# npm run secrets:audit
# ==========================================
